{% extends "base.html" %}
{% load static %}

{% block title %}Register Buyer | KILIMO GURU{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-md">
    <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
      Buyer Registration
    </h2>
    <p class="mt-2 text-center text-sm text-gray-600">
      Sign up to access verified farmers & market produce
    </p>
  </div>

  <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
    <div class="bg-white py-8 px-6 shadow rounded-lg sm:px-10">
      <form class="space-y-6" method="POST" action="{% url 'accounts:register_buyer' %}">
        {% csrf_token %}

        <!-- Full Name -->
        <div>
          <label for="full_name" class="block text-sm font-medium text-gray-700">
            Full Name
          </label>
          <div class="mt-1">
            <input type="text" name="full_name" id="full_name" autocomplete="name"
                   value="{{ form.full_name.value|default:'' }}"
                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            {% if form.full_name.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.full_name.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700">
            Email address
          </label>
          <div class="mt-1">
            <input type="email" name="email" id="email" autocomplete="email"
                   value="{{ form.email.value|default:'' }}"
                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            {% if form.email.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.email.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Phone (M-Pesa integration) -->
        <div>
          <label for="phone" class="block text-sm font-medium text-gray-700">
            Phone Number (M-Pesa)
          </label>
          <div class="mt-1">
            <input type="text" name="phone" id="phone" autocomplete="tel"
                   value="{{ form.phone.value|default:'' }}"
                   placeholder="07XXXXXXXX"
                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            {% if form.phone.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.phone.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Location / County -->
        <div>
          <label for="county" class="block text-sm font-medium text-gray-700">
            County
          </label>
          <div class="mt-1">
            <select name="county" id="county"
                    class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                           focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
              <option value="">Select County</option>
              {% for code, name in counties %}
                <option value="{{ name }}" {% if form.county.value == name %}selected{% endif %}>{{ name }}</option>
              {% endfor %}
            </select>
            {% if form.county.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.county.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Crop Preferences -->
        <div>
          <label for="crop_preferences" class="block text-sm font-medium text-gray-700">
            Preferred Crops / Produce
          </label>
          <div class="mt-1">
            <input type="text" name="crop_preferences" id="crop_preferences"
                   placeholder="Maize, Tomatoes, Avocado"
                   value="{{ form.crop_preferences.value|default:'' }}"
                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            {% if form.crop_preferences.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.crop_preferences.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Password -->
        <div>
          <label for="password1" class="block text-sm font-medium text-gray-700">
            Password
          </label>
          <div class="mt-1">
            <input type="password" name="password1" id="password1" autocomplete="new-password"
                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            {% if form.password1.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.password1.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Confirm Password -->
        <div>
          <label for="password2" class="block text-sm font-medium text-gray-700">
            Confirm Password
          </label>
          <div class="mt-1">
            <input type="password" name="password2" id="password2" autocomplete="new-password"
                   class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          placeholder-gray-400 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
            {% if form.password2.errors %}
              <p class="mt-1 text-xs text-red-600">{{ form.password2.errors }}</p>
            {% endif %}
          </div>
        </div>

        <!-- Submit Button -->
        <div>
          <button type="submit"
                  class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm
                         text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none
                         focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
            Register
          </button>
        </div>

        <!-- Already have account -->
        <div class="text-sm text-center mt-2">
          <a href="{% url 'accounts:login' %}" class="font-medium text-green-600 hover:text-green-500">
            Already have an account? Sign in
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}